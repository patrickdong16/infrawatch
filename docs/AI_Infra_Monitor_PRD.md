# AI 基建可持续性监测平台 - 产品设计文档 (PRD)

**产品名称**: AI Infrastructure Sustainability Monitor (暂定)  
**版本**: v1.0  
**日期**: 2026年1月  
**产品经理**: Claude  
**目标用户**: 科技投资者、研究分析师

---

## 一、产品概述

### 1.1 产品定位

一个面向专业科技投资者的 **AI基建可持续性先行指标监测平台**，通过追踪价格信号、企业采用数据和财务指标，帮助用户比市场更早6-12个月识别AI产业周期的拐点。

### 1.2 核心价值主张

| 用户痛点 | 产品解决方案 |
|----------|-------------|
| AI相关信息噪音大，难以判断真实周期位置 | 聚焦6个核心板块，只追踪一手数据 |
| 巨头披露口径不一，难以横向比较 | 标准化指标体系，自动计算派生指标 |
| 价格变动频繁，人工追踪成本高 | 自动化爬取，异动触发信号推送 |
| 缺乏系统性框架判断周期阶段 | 四阶段模型 + 规则化触发条件 |

### 1.3 产品原则

1. **只呈现事实，不做预测** - 系统输出信号，判断留给用户
2. **一手数据优先** - 仅采集官方披露、定价页、财报原文
3. **信号 > 噪音** - 只在显著变动时推送，避免信息过载
4. **透明可溯源** - 每个数据点都有原始来源链接

---

## 二、用户画像与使用场景

### 2.1 目标用户

**主要用户**: 科技领域二级市场投资者
- 管理 $10M-$500M 规模资金
- 重仓科技股（特别是Magnificent 7）
- 需要比卖方研究更及时、更独立的数据视角

**次要用户**: 一级市场投资者、产业研究员
- 关注AI产业链上下游机会
- 需要系统性框架理解产业周期

### 2.2 核心使用场景

| 场景 | 用户行为 | 产品响应 |
|------|----------|----------|
| **日常监测** | 每周查看仪表板 | 显示当前阶段、近期信号、价格趋势 |
| **异动响应** | 收到价格变动推送 | 一键查看详情、历史对比、关联指标 |
| **财报季分析** | 财报发布后提取数据 | 更新A/D板块指标，重算M01，判断阶段变化 |
| **深度研究** | 撰写研究报告 | 导出原始数据、图表、信号日志 |

---

## 三、产品架构

### 3.1 系统架构图

```
┌─────────────────────────────────────────────────────────────────┐
│                        用户界面层                                │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐        │
│  │ 阶段仪表盘 │  │ 价格监测 │  │ 信号中心 │  │ 数据导出 │        │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘        │
└─────────────────────────────────────────────────────────────────┘
                              │
┌─────────────────────────────────────────────────────────────────┐
│                        业务逻辑层                                │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐        │
│  │ 派生指标  │  │ 阶段判定 │  │ 信号引擎 │  │ 推送服务 │        │
│  │ 计算引擎  │  │ 规则引擎 │  │          │  │          │        │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘        │
└─────────────────────────────────────────────────────────────────┘
                              │
┌─────────────────────────────────────────────────────────────────┐
│                        数据采集层                                │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐        │
│  │ B板块    │  │ C板块    │  │ A/D板块   │  │ 手动录入 │        │
│  │ 模型定价  │  │ GPU租赁  │  │ 财报提取  │  │ 接口     │        │
│  │ 爬虫     │  │ 爬虫     │  │ (半自动)  │  │          │        │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘        │
└─────────────────────────────────────────────────────────────────┘
                              │
┌─────────────────────────────────────────────────────────────────┐
│                        数据存储层                                │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  时序数据库 (价格历史)  │  关系数据库 (指标/信号)  │  文件存储  │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
```

### 3.2 数据流

```
外部数据源 → 爬虫/手动录入 → 原始数据表 → 派生指标计算 → 信号引擎 → 用户界面/推送
                                              ↓
                                        阶段判定引擎
```

---

## 四、功能模块详细设计

### 4.1 模块总览

| 模块 | 优先级 | MVP | 描述 |
|------|--------|-----|------|
| P1 价格监测中心 | P0 | ✓ | B+C板块价格追踪与可视化 |
| P2 阶段仪表盘 | P0 | ✓ | 当前周期阶段判定与展示 |
| P3 信号中心 | P0 | ✓ | 信号日志查看与推送管理 |
| P4 财报数据管理 | P1 | - | A+D板块季度数据录入与展示 |
| P5 M01覆盖率分析 | P1 | - | 推理覆盖率计算与趋势 |
| P6 供应链监测中心 | P1 | - | E板块HBM/DRAM/GPU ASP价格追踪 |
| P7 数据导出 | P2 | - | CSV/图表导出 |
| P8 用户偏好设置 | P2 | - | 推送频率、关注指标 |

---

### 4.2 P1 价格监测中心 (MVP核心)

#### 4.2.1 功能描述

实时追踪模型API定价（B板块）和GPU租赁价格（C板块），提供价格趋势可视化和异动检测。

#### 4.2.2 页面结构

```
┌────────────────────────────────────────────────────────────────┐
│  价格监测中心                                    最后更新: 2026-01-28 │
├────────────────────────────────────────────────────────────────┤
│                                                                │
│  [Tab: 模型API定价]  [Tab: GPU租赁价格]  [Tab: 价格指数]         │
│                                                                │
│  ┌─────────────────────────────────────────────────────────┐  │
│  │                    价格趋势图                            │  │
│  │     $30 ┤                                               │  │
│  │         │ ●                                             │  │
│  │     $20 ┤   ╲                                           │  │
│  │         │     ╲___●                                     │  │
│  │     $10 ┤           ╲___●___●                           │  │
│  │         │                    ╲___●                      │  │
│  │      $0 ┼────────────────────────────────────────────   │  │
│  │         2023Q1  2023Q3  2024Q1  2024Q3  2025Q1  2025Q3  │  │
│  │                                                         │  │
│  │  [筛选: ○全部 ●旗舰模型 ○经济型]  [时间范围: 1Y ▼]       │  │
│  └─────────────────────────────────────────────────────────┘  │
│                                                                │
│  ┌─────────────────────────────────────────────────────────┐  │
│  │  当前价格表                                              │  │
│  ├─────────┬──────────┬────────┬────────┬────────┬────────┤  │
│  │ Provider│ Model    │ Input  │ Output │ 周环比  │ 来源   │  │
│  ├─────────┼──────────┼────────┼────────┼────────┼────────┤  │
│  │ OpenAI  │ GPT-4o   │ $2.50  │ $10.00 │ -      │ 🔗     │  │
│  │ Anthropic│Claude3.5│ $3.00  │ $15.00 │ -      │ 🔗     │  │
│  │ DeepSeek│ V3      │ $0.14  │ $0.28  │ 🔴-20% │ 🔗     │  │
│  │ Google  │Gemini1.5│ $1.25  │ $5.00  │ -      │ 🔗     │  │
│  └─────────┴──────────┴────────┴────────┴────────┴────────┘  │
│                                                                │
└────────────────────────────────────────────────────────────────┘
```

#### 4.2.3 功能点

| 功能 | 描述 | 优先级 |
|------|------|--------|
| 价格表展示 | 展示所有监测对象当前价格 | P0 |
| 价格趋势图 | 可筛选厂商/模型的历史价格折线图 | P0 |
| 环比变化标记 | 周/月环比变化超过阈值时高亮 | P0 |
| 来源链接 | 每个数据点可跳转原始定价页 | P0 |
| 派生指数展示 | B_price_index, C_rental_index 等 | P1 |
| 厂商对比视图 | 同类模型/SKU横向对比 | P1 |

#### 4.2.4 数据采集策略

**B板块 - 模型API定价**

| Provider | 采集方式 | 频率 | 技术方案 |
|----------|----------|------|----------|
| OpenAI | 爬虫 | 每日 | 解析 platform.openai.com/docs/pricing |
| Anthropic | 爬虫 | 每日 | 解析 anthropic.com/pricing |
| Google | 爬虫 | 每日 | 解析 ai.google.dev/pricing |
| DeepSeek | 爬虫 | 每日 | 解析 platform.deepseek.com |
| Together.ai | API/爬虫 | 每日 | 解析 together.ai/pricing |

**C板块 - GPU租赁价格**

| Provider | 采集方式 | 频率 | 技术方案 |
|----------|----------|------|----------|
| Lambda Labs | 爬虫 | 每日 | 解析定价页 |
| CoreWeave | 爬虫 | 每日 | 解析定价页 |
| RunPod | API | 每日 | 公开API可用 |
| Vast.ai | API | 每日 | 公开API可用 |
| AWS/Azure/GCP | 爬虫 | 每周 | 定价页结构复杂，降频 |

**E板块 - 供应链价格（Phase 2）**

| 数据项 | 数据源 | 采集方式 | 频率 |
|--------|--------|----------|------|
| HBM3e合约价 | TrendForce | 订阅API/手动 | 月度 |
| 服务器DRAM价格 | DRAMeXchange | 订阅API/手动 | 周度 |
| GPU ASP估算 | 分析师报告 | 手动录入 | 季度 |
| CoWoS利用率 | 供应链调研 | 手动录入 | 季度 |
| HBM出货量 | SK海力士/三星IR | 爬虫/手动 | 季度 |

---

### 4.3 P2 阶段仪表盘 (MVP核心)

#### 4.3.1 功能描述

以仪表盘形式展示当前AI基建周期所处阶段，配合关键指标支撑判断。

#### 4.3.2 页面结构

```
┌────────────────────────────────────────────────────────────────┐
│  AI 基建周期阶段仪表盘                          更新: 2026-01-28 │
├────────────────────────────────────────────────────────────────┤
│                                                                │
│  ┌─────────────────────────────────────────────────────────┐  │
│  │                                                         │  │
│  │                    ┌───────────┐                        │  │
│  │                    │           │                        │  │
│  │         S0         │    S1     │      S2       S3       │  │
│  │      不可持续      │  临界过渡  │   早期自养   成熟工业化  │  │
│  │                    │     ▲     │                        │  │
│  │     ████████████████████░░░░░░░░░░░░░░░░░░░░░░░░░       │  │
│  │                    │           │                        │  │
│  │                    └───────────┘                        │  │
│  │                                                         │  │
│  │  当前阶段: S1 临界过渡                                   │  │
│  │  判定依据: M01区间 0.24-0.36，A板块指标连续两季正增长     │  │
│  │  置信度: 中等 (部分指标待财报更新)                        │  │
│  │                                                         │  │
│  └─────────────────────────────────────────────────────────┘  │
│                                                                │
│  ┌───────────────┐  ┌───────────────┐  ┌───────────────┐     │
│  │ M01 覆盖率     │  │ 价格战烈度    │  │ 供需状态      │     │
│  │               │  │               │  │               │     │
│  │  0.24 - 0.36  │  │  -8% QoQ     │  │  供需紧平衡   │     │
│  │  ████░░░░░░   │  │  ████████░░   │  │  █████████░   │     │
│  │  过渡期       │  │  中等压力     │  │  略偏紧       │     │
│  └───────────────┘  └───────────────┘  └───────────────┘     │
│                                                                │
│  ┌─────────────────────────────────────────────────────────┐  │
│  │  阶段迁移风险监测                                        │  │
│  │                                                         │  │
│  │  → S2 (早期自养): 需 M01_low > 0.7 且价格稳定           │  │
│  │    当前距离: M01需再提升 ~0.35                 [未满足]   │  │
│  │                                                         │  │
│  │  → S0 (不可持续): 若 A板块连续两季负增长                 │  │
│  │    当前状态: A板块持续正增长                   [风险低]   │  │
│  └─────────────────────────────────────────────────────────┘  │
│                                                                │
└────────────────────────────────────────────────────────────────┘
```

#### 4.3.3 功能点

| 功能 | 描述 | 优先级 |
|------|------|--------|
| 阶段指示器 | 可视化展示当前S0-S3阶段 | P0 |
| 判定依据展示 | 显示触发当前阶段判定的具体条件 | P0 |
| 关键指标卡片 | M01/价格/供需三个核心维度摘要 | P0 |
| 迁移风险监测 | 显示向上/向下迁移的条件与距离 | P1 |
| 历史阶段回顾 | 过去4个季度的阶段变化时间线 | P2 |

#### 4.3.4 阶段判定逻辑（后端实现）

```python
def determine_stage(metrics):
    """
    基于最新指标判定当前阶段
    返回: (stage, confidence, rationale)
    """
    m01_low = metrics['M01_low']
    m01_high = metrics['M01_high']
    b_qoq_deflation = metrics['B_qoq_deflation']
    c_spot_discount = metrics['C_spot_discount']
    a_growth_streak = metrics['A_growth_streak']  # 连续正增长季度数
    c_rental_stable = abs(metrics['C_rental_qoq']) < 0.05
    d3_margin_stable = abs(metrics['D3_qoq']) < 0.03
    
    # S0: 不可持续
    if m01_high < 0.3 and b_qoq_deflation > 0.15 and c_spot_discount > 0.40:
        return ('S0', 'HIGH', 'M01过低 + 价格崩塌 + 产能过剩')
    
    # S3: 成熟工业化
    if m01_low > 1.0 and d3_margin_stable:
        return ('S3', 'HIGH', 'M01>1.0 + 云利润率稳定')
    
    # S2: 早期自养
    if m01_low > 0.7 and c_rental_stable:
        return ('S2', 'HIGH', 'M01接近自养 + 供需平衡')
    
    # S1: 临界过渡 (默认)
    if 0.3 <= m01_high <= 0.7 or a_growth_streak >= 2:
        confidence = 'HIGH' if a_growth_streak >= 2 else 'MEDIUM'
        return ('S1', confidence, 'M01过渡区间 或 企业采用持续增长')
    
    # 边界情况
    return ('S1', 'LOW', '指标信号混合，需人工判断')
```

---

### 4.4 P3 信号中心 (MVP核心)

#### 4.4.1 功能描述

汇总所有触发的信号，支持筛选、查看详情、管理推送偏好。

#### 4.4.2 页面结构

```
┌────────────────────────────────────────────────────────────────┐
│  信号中心                                       未读: 3 条      │
├────────────────────────────────────────────────────────────────┤
│                                                                │
│  [筛选: 全部▼]  [类型: 全部▼]  [时间: 近30天▼]  [🔍 搜索]      │
│                                                                │
│  ┌─────────────────────────────────────────────────────────┐  │
│  │ 🔴 2026-01-27  price_move                               │  │
│  │                                                         │  │
│  │ DeepSeek V3 输入价格下调 20%                             │  │
│  │ $0.175/M → $0.14/M                                      │  │
│  │                                                         │  │
│  │ 阶段影响: S1维持，但增加S0风险                            │  │
│  │ 关联指标: B_china_discount 扩大至 5.6%                   │  │
│  │                                                         │  │
│  │ [查看详情]  [查看来源]  [标记已读]                        │  │
│  └─────────────────────────────────────────────────────────┘  │
│                                                                │
│  ┌─────────────────────────────────────────────────────────┐  │
│  │ 🟡 2026-01-25  adoption_inflection                      │  │
│  │                                                         │  │
│  │ Microsoft Copilot 万席客户数环比 +45%                    │  │
│  │ 111 → 161 家企业                                        │  │
│  │                                                         │  │
│  │ 阶段影响: S1→S2 正向信号                                 │  │
│  │                                                         │  │
│  │ [查看详情]  [查看来源]  [标记已读]                        │  │
│  └─────────────────────────────────────────────────────────┘  │
│                                                                │
│  ┌─────────────────────────────────────────────────────────┐  │
│  │ 🟢 2026-01-20  supply_demand_shift                      │  │
│  │                                                         │  │
│  │ H100 租赁价格连续4周稳定                                 │  │
│  │ C_rental_index 波动 < 2%                                │  │
│  │                                                         │  │
│  │ 阶段影响: 供需平衡信号，支撑S1判定                        │  │
│  │                                                         │  │
│  │ [查看详情]  [标记已读]                                   │  │
│  └─────────────────────────────────────────────────────────┘  │
│                                                                │
│  [加载更多...]                                                 │
│                                                                │
└────────────────────────────────────────────────────────────────┘
```

#### 4.4.3 信号触发规则

| signal_type | 触发条件 | 严重程度 |
|-------------|----------|----------|
| `price_move` | B或C板块指标周环比 > 10% | 🔴 高 |
| `price_move` | B或C板块指标周环比 5-10% | 🟡 中 |
| `adoption_inflection` | A板块指标季度环比 > 20% | 🟡 中 |
| `coverage_threshold` | M01 跨越 0.3/0.7/1.0 | 🔴 高 |
| `supply_demand_shift` | C_spot_discount 变化 > 10pp | 🔴 高 |
| `disclosure_change` | 厂商披露口径变化 | 🟡 中 |
| `supply_chain_alert` | E1(HBM)连续3月涨>5% 或 E4(CoWoS)>95% | 🔴 高 |
| `supply_chain_alert` | E1(HBM)月环比跌>10% | 🟡 中 |

#### 4.4.4 推送配置

| 推送渠道 | MVP | 描述 |
|----------|-----|------|
| 站内通知 | ✓ | 信号中心红点提示 |
| Email | ✓ | 每日/每周摘要 |
| Webhook | - | 推送到Slack/Discord |
| SMS | - | 仅高严重程度信号 |

---

### 4.5 P4 财报数据管理 (Phase 2)

#### 4.5.1 功能描述

管理A板块（企业采用）和D板块（巨头财务）的季度数据，支持手动录入和半自动提取。

#### 4.5.2 页面结构

```
┌────────────────────────────────────────────────────────────────┐
│  财报数据管理                                                   │
├────────────────────────────────────────────────────────────────┤
│                                                                │
│  [Tab: A板块-企业采用]  [Tab: D板块-巨头财务]                    │
│                                                                │
│  ┌─────────────────────────────────────────────────────────┐  │
│  │  即将发布                                                │  │
│  │  • Microsoft FY26 Q2 - 2026-01-29 (明天)                │  │
│  │  • Alphabet Q4 2025 - 2026-02-04                        │  │
│  │  • Amazon Q4 2025 - 2026-02-06                          │  │
│  └─────────────────────────────────────────────────────────┘  │
│                                                                │
│  ┌─────────────────────────────────────────────────────────┐  │
│  │  数据录入                                    [+ 新增记录] │  │
│  ├─────────┬────────┬────────┬────────┬────────┬──────────┤  │
│  │ 季度    │ 公司   │ 指标   │ 数值   │ 来源   │ 操作     │  │
│  ├─────────┼────────┼────────┼────────┼────────┼──────────┤  │
│  │ 2025-Q3 │ MSFT   │ D1     │ $20.0B │ 🔗     │ [编辑]   │  │
│  │ 2025-Q3 │ MSFT   │ D2     │ $13.0B │ 🔗     │ [编辑]   │  │
│  │ 2025-Q3 │ MSFT   │ D4     │ 12pp   │ 🔗     │ [编辑]   │  │
│  │ 2025-Q3 │ MSFT   │ A2     │ 111    │ 🔗     │ [编辑]   │  │
│  │ ...     │ ...    │ ...    │ ...    │ ...    │ ...      │  │
│  └─────────┴────────┴────────┴────────┴────────┴──────────┘  │
│                                                                │
│  [导入CSV]  [导出CSV]                                          │
│                                                                │
└────────────────────────────────────────────────────────────────┘
```

#### 4.5.3 数据录入表单

```
┌────────────────────────────────────────────────────────────────┐
│  录入财报数据                                           [关闭] │
├────────────────────────────────────────────────────────────────┤
│                                                                │
│  季度:     [2025-Q4 ▼]                                        │
│                                                                │
│  公司:     [Microsoft ▼]                                      │
│                                                                │
│  指标:     [D1 - 资本支出 ▼]                                  │
│                                                                │
│  数值:     [22.6        ] [B_USD ▼]                           │
│                                                                │
│  同比变化: [+79         ] %                                    │
│                                                                │
│  来源URL: [https://microsoft.com/investor/...              ]   │
│                                                                │
│  备注:    [FY26 Q2, 含数据中心租赁                         ]   │
│                                                                │
│                               [取消]  [保存并继续]  [保存]     │
│                                                                │
└────────────────────────────────────────────────────────────────┘
```

---

### 4.6 P5 M01 覆盖率分析 (Phase 2)

#### 4.6.1 功能描述

基于D板块数据自动计算M01代理指标，展示各巨头的推理覆盖率区间和趋势。

#### 4.6.2 页面结构

```
┌────────────────────────────────────────────────────────────────┐
│  M01 推理覆盖率分析                                            │
├────────────────────────────────────────────────────────────────┤
│                                                                │
│  计算参数:  AI Capex占比 [40-60%]  折旧周期 [4年]  [重新计算]  │
│                                                                │
│  ┌─────────────────────────────────────────────────────────┐  │
│  │                    M01 区间对比图                        │  │
│  │                                                         │  │
│  │  Microsoft  ████████████░░░░░░░░░░░░░░  0.24 - 0.36     │  │
│  │  Amazon     █████████░░░░░░░░░░░░░░░░░  0.18 - 0.27     │  │
│  │  Google     ██████░░░░░░░░░░░░░░░░░░░░  0.11 - 0.16     │  │
│  │  Meta       ████████████████░░░░░░░░░░  0.32 - 0.48     │  │
│  │                                                         │  │
│  │             0    0.3   0.5   0.7    1.0                 │  │
│  │             |-----|-----|-----|-----|                   │  │
│  │             补贴期 过渡期 接近自养 自养                    │  │
│  └─────────────────────────────────────────────────────────┘  │
│                                                                │
│  ┌─────────────────────────────────────────────────────────┐  │
│  │                    M01 趋势图 (Microsoft)               │  │
│  │                                                         │  │
│  │   0.4 ┤                            ╭─────╮              │  │
│  │       │                      ╭─────╯     │ 0.36        │  │
│  │   0.3 ┤                ╭─────╯           │              │  │
│  │       │          ╭─────╯                 │              │  │
│  │   0.2 ┤    ╭─────╯                       ╰───── 0.24    │  │
│  │       │────╯                                            │  │
│  │   0.1 ┼─────────────────────────────────────────────    │  │
│  │       2024Q1  2024Q2  2024Q3  2024Q4  2025Q1  2025Q2    │  │
│  │                                                         │  │
│  │       ─── M01_high    ─ ─ M01_low                       │  │
│  └─────────────────────────────────────────────────────────┘  │
│                                                                │
│  ┌─────────────────────────────────────────────────────────┐  │
│  │  计算明细表                                              │  │
│  ├─────────┬────────┬────────┬────────┬────────┬──────────┤  │
│  │ 公司    │AI收入   │总Capex │AI Capex│年折旧  │M01区间   │  │
│  ├─────────┼────────┼────────┼────────┼────────┼──────────┤  │
│  │ MSFT    │ $13.0B │ $90B   │$36-54B │$9-13.5B│0.24-0.36 │  │
│  │ AMZN    │ $8.0B  │ $75B   │$30-45B │$7.5-11B│0.18-0.27 │  │
│  │ GOOGL   │ $6.0B  │ $93B   │$37-56B │$9-14B  │0.11-0.16 │  │
│  └─────────┴────────┴────────┴────────┴────────┴──────────┘  │
│                                                                │
└────────────────────────────────────────────────────────────────┘
```

---

### 4.7 P6 供应链监测中心 (Phase 2)

#### 4.7.1 功能描述

追踪AI基建上游供应链价格（HBM、DRAM、GPU ASP、先进封装产能），提前6-12个月预警成本变化对算力价格和基建投资的影响。

#### 4.7.2 页面结构

```
┌────────────────────────────────────────────────────────────────┐
│  供应链监测中心                                  更新: 2026-01-28 │
├────────────────────────────────────────────────────────────────┤
│                                                                │
│  [Tab: HBM/DRAM价格]  [Tab: GPU ASP]  [Tab: 产能利用率]         │
│                                                                │
│  ┌─────────────────────────────────────────────────────────┐  │
│  │  供应链紧张度指数: 87/100  🔴 紧张                        │  │
│  │  ████████████████████░░░                                │  │
│  │  HBM供应紧张 + CoWoS满载 → 6-12月后成本上行压力           │  │
│  └─────────────────────────────────────────────────────────┘  │
│                                                                │
│  ┌─────────────────────────────────────────────────────────┐  │
│  │  当前价格表                                              │  │
│  ├────────────┬──────────┬────────┬────────┬──────────────┤  │
│  │ 品类       │ 产品     │ 价格   │ 月环比 │ 年同比       │  │
│  ├────────────┼──────────┼────────┼────────┼──────────────┤  │
│  │ HBM        │ HBM3e    │$15.5/GB│ +3.2%  │ +45%  🔴    │  │
│  │ DRAM       │ DDR5-64G │ $185   │ -2.1%  │ -15%  🟢    │  │
│  │ GPU        │ H100 SXM │$28,500 │  0%    │ -12%  🟢    │  │
│  │ 封装       │ CoWoS    │ 98%利用│  -     │ +8pp  🔴    │  │
│  └────────────┴──────────┴────────┴────────┴──────────────┘  │
│                                                                │
│  ┌─────────────────────────────────────────────────────────┐  │
│  │  派生指标                                                │  │
│  │  • E_hbm_premium (HBM/DDR5溢价): 83.8x                  │  │
│  │  • E_supply_tightness: 0.87 (>0.8为紧张)                │  │
│  └─────────────────────────────────────────────────────────┘  │
└────────────────────────────────────────────────────────────────┘
```

#### 4.7.3 功能点

| 功能 | 描述 | 优先级 |
|------|------|--------|
| 供应链紧张度指数 | 综合HBM价格涨幅和CoWoS利用率的评分 | P1 |
| HBM/DRAM价格追踪 | 月度/周度价格趋势图 | P1 |
| GPU ASP估算 | 季度更新，渠道价格汇总 | P1 |
| 成本传导预警 | 基于供应链信号预警C板块价格变化 | P2 |

---

## 五、技术架构建议

### 5.1 技术选型

| 层级 | 推荐方案 | 备选 | 理由 |
|------|----------|------|------|
| **前端** | Next.js + Tailwind | Vue 3 | SSR支持、生态成熟 |
| **图表** | Recharts / ECharts | D3.js | 开箱即用、交互性好 |
| **后端** | Python FastAPI | Node.js | 爬虫生态好、数据处理方便 |
| **数据库** | PostgreSQL + TimescaleDB | InfluxDB | 时序数据+关系数据混合 |
| **爬虫** | Scrapy + Playwright | Selenium | 处理JS渲染页面 |
| **任务调度** | Celery + Redis | APScheduler | 分布式、可靠 |
| **部署** | Vercel (前端) + Railway (后端) | AWS | 快速迭代、成本可控 |

### 5.2 数据库设计

```sql
-- 原始价格数据
CREATE TABLE price_records (
    id SERIAL PRIMARY KEY,
    recorded_at TIMESTAMPTZ NOT NULL,
    板块 VARCHAR(1) NOT NULL,  -- 'B' or 'C'
    provider VARCHAR(50) NOT NULL,
    sku VARCHAR(100) NOT NULL,
    price_type VARCHAR(20),  -- 'input', 'output', 'hourly'
    price DECIMAL(10,4) NOT NULL,
    currency VARCHAR(3) DEFAULT 'USD',
    commitment_type VARCHAR(20),
    source_url TEXT,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- 转换为时序表 (TimescaleDB)
SELECT create_hypertable('price_records', 'recorded_at');

-- 供应链价格数据 (E板块)
CREATE TABLE supply_chain_prices (
    id SERIAL PRIMARY KEY,
    recorded_at TIMESTAMPTZ NOT NULL,
    category VARCHAR(20) NOT NULL,  -- 'HBM', 'DRAM', 'GPU', 'Packaging'
    item VARCHAR(50) NOT NULL,
    price DECIMAL(12,4) NOT NULL,
    unit VARCHAR(20),
    mom_change DECIMAL(6,2),
    yoy_change DECIMAL(6,2),
    source VARCHAR(50),
    notes TEXT,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

SELECT create_hypertable('supply_chain_prices', 'recorded_at');

-- 财报数据
CREATE TABLE financial_records (
    id SERIAL PRIMARY KEY,
    quarter VARCHAR(7) NOT NULL,  -- '2025-Q4'
    company VARCHAR(10) NOT NULL,
    metric_id VARCHAR(10) NOT NULL,
    value DECIMAL(12,2) NOT NULL,
    unit VARCHAR(20),
    yoy_change VARCHAR(20),
    qoq_change VARCHAR(20),
    source_url TEXT,
    notes TEXT,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- 信号日志
CREATE TABLE signal_log (
    id SERIAL PRIMARY KEY,
    triggered_at TIMESTAMPTZ NOT NULL,
    signal_type VARCHAR(30) NOT NULL,
    metric_id VARCHAR(10),
    direction VARCHAR(4),  -- 'up', 'down'
    magnitude VARCHAR(20),
    description TEXT NOT NULL,
    source_url TEXT,
    stage_implication TEXT,
    severity VARCHAR(10),  -- 'high', 'medium', 'low'
    is_read BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- 派生指标快照
CREATE TABLE derived_metrics (
    id SERIAL PRIMARY KEY,
    calculated_at TIMESTAMPTZ NOT NULL,
    metric_name VARCHAR(50) NOT NULL,
    value DECIMAL(10,4) NOT NULL,
    company VARCHAR(10),
    metadata JSONB,
    created_at TIMESTAMPTZ DEFAULT NOW()
);
```

### 5.3 爬虫架构

```
┌─────────────────────────────────────────────────────────────────┐
│                        爬虫调度器 (Celery Beat)                  │
│                                                                 │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐        │
│  │ 每日任务 │  │ 每周任务 │  │ 每月任务 │  │ 触发任务 │        │
│  │ B板块    │  │ C板块    │  │ 云厂商   │  │ 财报发布 │        │
│  │ API定价  │  │ GPU租赁  │  │ 实例价格 │  │ 数据提取 │        │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘        │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                        爬虫工作节点 (Celery Worker)              │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  Spider Registry                                        │   │
│  │  • OpenAIPricingSpider                                  │   │
│  │  • AnthropicPricingSpider                               │   │
│  │  • LambdaLabsSpider                                     │   │
│  │  • ...                                                  │   │
│  └─────────────────────────────────────────────────────────┘   │
│                              │                                  │
│                              ▼                                  │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  数据清洗 & 验证                                         │   │
│  │  • 价格单位标准化                                        │   │
│  │  • 异常值检测                                            │   │
│  │  • 去重                                                  │   │
│  └─────────────────────────────────────────────────────────┘   │
│                              │                                  │
│                              ▼                                  │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  信号触发检测                                            │   │
│  │  • 与前值对比                                            │   │
│  │  • 检查是否超过阈值                                       │   │
│  │  • 生成信号记录                                          │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
```

---

## 六、开发路线图

### 6.1 里程碑规划

| 阶段 | 时间 | 目标 | 交付物 |
|------|------|------|--------|
| **Phase 0** | Week 1-2 | 技术验证 | 爬虫POC、数据库Schema、基础UI框架 |
| **Phase 1 (MVP)** | Week 3-6 | 核心功能上线 | 价格监测+阶段仪表盘+信号中心 |
| **Phase 2** | Week 7-10 | 完善数据体系 | 财报管理+M01分析+数据导出 |
| **Phase 3** | Week 11-14 | 体验优化 | 移动适配+推送优化+性能调优 |

### 6.2 MVP 详细排期

| 周次 | 任务 | 产出 |
|------|------|------|
| **Week 1** | 项目初始化、数据库设计、爬虫框架搭建 | 可运行的爬虫采集B板块数据 |
| **Week 2** | C板块爬虫、数据清洗逻辑、信号触发逻辑 | 完整数据采集管道 |
| **Week 3** | 前端框架、价格监测页面、图表组件 | 可交互的价格监测页面 |
| **Week 4** | 阶段仪表盘UI、阶段判定引擎 | 可用的阶段仪表盘 |
| **Week 5** | 信号中心UI、推送服务（Email） | 完整MVP功能 |
| **Week 6** | 测试、Bug修复、部署上线 | **MVP发布** |

### 6.3 MVP 成功标准

| 指标 | 目标 |
|------|------|
| 数据覆盖 | B板块 6个厂商 + C板块 7个厂商 |
| 数据新鲜度 | B/C板块价格延迟 < 24小时 |
| 信号准确率 | 价格变动信号无遗漏 |
| 页面可用性 | 核心页面3秒内加载完成 |

---

## 七、风险与应对

| 风险 | 可能性 | 影响 | 应对措施 |
|------|--------|------|----------|
| 厂商定价页结构变化导致爬虫失效 | 高 | 中 | 模块化爬虫设计，快速适配；监控爬虫成功率 |
| 部分厂商反爬限制 | 中 | 中 | 使用代理IP池；降低爬取频率；备选手动录入 |
| 财报披露口径变化 | 中 | 高 | 信号系统增加 `disclosure_change` 类型；人工审核 |
| M01计算假设被质疑 | 低 | 中 | 公开计算方法；允许用户调整参数 |
| 用户对阶段判定结果有异议 | 中 | 低 | 强调"系统不做判断"原则；提供原始数据 |

---

## 八、附录

### 8.1 术语表

| 术语 | 定义 |
|------|------|
| M01 | 推理覆盖率 = AI推理收入 / AI相关资产年化折旧 |
| B板块 | 模型API定价监测 |
| C板块 | 云服务/GPU租赁价格监测 |
| A板块 | 企业应用采用率监测 |
| D板块 | 巨头财务数据监测 |
| Signal | 指标显著变动时触发的事件 |
| S0-S3 | 产业周期四个阶段 |

### 8.2 竞品参考

| 产品 | 定位 | 可借鉴 | 差异化 |
|------|------|--------|--------|
| Artificial Analysis | AI模型性能基准测试 | 价格追踪功能 | 我们聚焦投资视角，非技术评测 |
| Visible Alpha | 财务预测数据 | 数据呈现方式 | 我们只呈现一手数据，不做预测 |
| Koyfin | 金融数据终端 | 仪表盘设计 | 我们专注AI垂直领域 |

### 8.3 后续迭代方向

| 方向 | 描述 | 优先级 |
|------|------|--------|
| API开放 | 提供数据API供高级用户接入 | 中 |
| 历史数据回测 | 用历史数据验证阶段判定规则 | 高 |
| 多语言支持 | 英文版本 | 中 |
| 报告生成 | 自动生成周报/月报 | 低 |
| 社区功能 | 用户可提交信号解读 | 低 |

---

**文档版本**: v1.0  
**最后更新**: 2026-01-28  
**下一步**: 技术评审 → 确认MVP范围 → 启动Phase 0
